-- ============================================================
-- Migration: Truncate All Data
-- Description: 모든 테이블의 데이터를 삭제하고 새롭게 시작
-- Note: 테이블 구조는 유지하고 데이터만 삭제
-- ============================================================

BEGIN;

-- ============================================================
-- 모든 테이블의 데이터 삭제 (외래 키 제약 조건 순서 고려)
-- ============================================================

-- 모든 테이블을 한 번에 TRUNCATE (CASCADE로 외래 키 처리)
TRUNCATE TABLE
  applications,
  campaigns,
  influencer_channels,
  influencer_profiles,
  advertiser_profiles,
  user_agreements,
  users
RESTART IDENTITY CASCADE;

-- ============================================================
-- 완료 메시지
-- ============================================================
DO $$
BEGIN
  RAISE NOTICE '모든 테이블의 데이터가 성공적으로 삭제되었습니다.';
  RAISE NOTICE '테이블 구조는 유지되며, ID 시퀀스도 1부터 다시 시작됩니다.';
END $$;

COMMIT;
